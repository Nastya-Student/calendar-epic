(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const y="active_year",p="active_month",d=()=>localStorage.getItem(y)??new Date().getFullYear(),l=()=>localStorage.getItem(p)??new Date().getMonth(),v=({year:e,month:t})=>{localStorage.setItem(y,e),localStorage.setItem(p,t)},E=e=>{let t=d(),s=l();s--,s==-1&&(t--,s=11),v({year:t,month:s}),e?.()},L=e=>{let t=d(),s=l();s++,s==12&&(t++,s=0),v({year:t,month:s}),e?.()},B=(e,t)=>({...e,timestamp:Date.now(),id:t}),u=e=>JSON.parse(localStorage.getItem(e)??"[]"),D=e=>{const t=u(e.id);console.log(t),localStorage.setItem(e.id,JSON.stringify([...t,e]))},I=e=>{const t=document.getElementById("note-form"),s=document.getElementById("form-overlay"),r=document.getElementById("form"),o=document.getElementById("close-form"),n=()=>{s.classList.add("hidden"),r.classList.add("hidden"),location.reload()};o.addEventListener("click",n),r.addEventListener("submit",c=>{c.preventDefault();const a=new FormData(t),i=B(Object.fromEntries(a.entries()),e);D(i),c.target.reset(),n()})},N=(e,t)=>{const r=[...u(e.id)].filter(o=>o.timestamp!=t);localStorage.setItem(e.id,JSON.stringify(r))},x=e=>{const s=[...document.getElementsByTagName("td")],r=document.getElementById("form-overlay"),o=document.getElementById("form"),n=()=>{r.classList.remove("hidden"),o.classList.remove("hidden")};s.forEach(i=>{i.addEventListener("click",h=>{let f=!1;[...i.getElementsByTagName("button")].forEach(g=>{g.contains(h.target)&&(N(i,g.id),e(),f=!0)}),f||(n(),I(i.id))})});const c=document.getElementById("increment"),a=document.getElementById("decrement");c.addEventListener("click",()=>{L(e)}),a.addEventListener("click",()=>{E(e)})},O=()=>{const e=d(),t=l(),s=document.getElementById("caption-text"),r=new Date(e,t).toLocaleString("en-GB",{month:"long"});s.textContent=e+" "+r},w=()=>{const e=d(),t=l(),s=[];let r=new Date(e,t,0).getDay(),o=new Date(e,+t+1,0).getDate(),n=new Date(e,t,0).getDate();for(let c=r-1;c>=0;c--){let a=e;t==0&&a--,s[c]=n+"-"+(t-1)+"-"+a,n--}for(let c=r,a=1;a<=o;c++,a++)s[c]=a+"-"+t+"-"+e;for(let c=o+r,a=1;c<42;c++,a++){let i=e;t==11&&i++,s[c]=a+"-"+(+t+1)+"-"+i}return s},b=e=>e.sort((t,s)=>s.timestamp-t.timestamp),S=(e,t)=>{const s=document.getElementById(t),r=u(t),o=b(r);s.classList.add("p-3","border","border-black","w-50","h-30","align-top"),s.innerHTML=`<div class="align-top"> ${t.split("-")[0]}</div>
  ${o.length>0?'<p class="font-thin text-sm text-indigo-900">your notes:</p>':'<p class="font-thin text-sm text-indigo-200">no notes</p>'}
  <div>
  ${o.length>0?`<ul id="notes-list" class="max-h-15 overflow-y-auto text-sm text-emerald-800/80">${o.reduce((n,c)=>n+T(c),"")}</ul>`:""}
  </div>
  `},T=({text:e,timestamp:t,id:s})=>{const r=document.createElement("li");return r.innerHTML=`
  <div class="flex place-content-between">
  <div>
  ${e} 
  </div>
  <button id="${t}" class="delete-button">x</button>
  </div>`,r.outerHTML},A=e=>{d();const t=l(),s=document.getElementsByTagName("td"),r=w(),o=[...s];for(let n=0;n<42;n++)o[n].id=r[n];o.forEach(n=>{S(e,n.id)}),o.forEach(n=>{n.id.split("-")[1]!=t?n.classList.add("text-gray-400"):n.classList.remove("text-gray-400")})},m=()=>{O(),A(m)};document.addEventListener("DOMContentLoaded",()=>{x(m),m()});
